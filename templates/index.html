<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Busca de Preços</title>
    <link rel="stylesheet" href="../static/style.css"/>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=League+Gothic&family=Montserrat:ital,wght@0,100..900;1,100..900&family=Open+Sans:ital,wght@0,300..800;1,300..800&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
    <link rel="shortcut icon" href="../static/img/logo.png" type="image/x-icon">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet">
    <style>
      .material-symbols-outlined {
      font-variation-settings:
      'FILL' 0,
      'wght' 400,
      'GRAD' 0,
      'opsz' 20
      }
    </style>
  </head>
  <body>
    <header>
        <!-- LOGO --> 
        <img src="../static/img/logo_branco.png" alt="logo da loja" id="logo" />


        <!-- BARRA DE PESQUISA --> 
        <div class="group">
            <svg viewBox="0 0 24 24" aria-hidden="true" class="search-icon">
                <g>
                    <path
                        d="M21.53 20.47l-3.66-3.66C19.195 15.24 20 13.214 20 11c0-4.97-4.03-9-9-9s-9 4.03-9 9 4.03 9 9 9c2.215 0 4.24-.804 5.808-2.13l3.66 3.66c.147.146.34.22.53.22s.385-.073.53-.22c.295-.293.295-.767.002-1.06zM3.5 11c0-4.135 3.365-7.5 7.5-7.5s7.5 3.365 7.5 7.5-3.365 7.5-7.5 7.5-7.5-3.365-7.5-7.5z"
                    ></path>
                </g>
            </svg>
            <input id="query" class="input" type="search" placeholder="Procure o produto desejado..." name="searchbar"/>
        </div>
  
      
      <!-- PAINEL PERFIL E CARRINHO -->  
        <div class="button-container">
            <button class="button">
                <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="1em"
                    height="1em"
                    viewBox="0 0 1024 1024"
                    stroke-width="0"
                    fill="currentColor"
                    stroke="currentColor"
                    class="icon"
                >
                <path
                    d="M946.5 505L560.1 118.8l-25.9-25.9a31.5 31.5 0 0 0-44.4 0L77.5 505a63.9 63.9 0 0 0-18.8 46c.4 35.2 29.7 63.3 64.9 63.3h42.5V940h691.8V614.3h43.4c17.1 0 33.2-6.7 45.3-18.8a63.6 63.6 0 0 0 18.7-45.3c0-17-6.7-33.1-18.8-45.2zM568 868H456V664h112v204zm217.9-325.7V868H632V640c0-22.1-17.9-40-40-40H432c-22.1 0-40 17.9-40 40v228H238.1V542.3h-96l370-369.7 23.1 23.1L882 542.3h-96.1z"
                ></path>
                </svg>
            </button>
        <button class="button">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="1em"
            height="1em"
            viewBox="0 0 24 24"
            stroke-width="0"
            fill="currentColor"
            stroke="currentColor"
            class="icon"
          >
            <path
              d="M12 2.5a5.5 5.5 0 0 1 3.096 10.047 9.005 9.005 0 0 1 5.9 8.181.75.75 0 1 1-1.499.044 7.5 7.5 0 0 0-14.993 0 .75.75 0 0 1-1.5-.045 9.005 9.005 0 0 1 5.9-8.18A5.5 5.5 0 0 1 12 2.5ZM8 8a4 4 0 1 0 8 0 4 4 0 0 0-8 0Z"
            ></path>
          </svg>
        </button>

        <button class="button">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="1em"
            height="1em"
            stroke-linejoin="round"
            stroke-linecap="round"
            viewBox="0 0 24 24"
            stroke-width="2"
            fill="none"
            stroke="currentColor"
            class="icon"
          >
            <circle r="1" cy="21" cx="9"></circle>
            <circle r="1" cy="21" cx="20"></circle>
            <path
              d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"
            ></path>
          </svg>
        </button>
      </div>
    </header>

    <!--NAVBAR-->
    <nav>
        <div id="links">
            <a href="#">
              <span class="material-symbols-outlined">home</span>
              <span class="link-text">Home</span>
            </a>
            <a href="#">
              <span class="material-symbols-outlined">menu</span>
              <span class="link-text">Categorias</span>
            </a>
            <a href="#">
              <span class="material-symbols-outlined">trending_down</span>
              <span class="link-text">Ofertas</span>
            </a>
            <a href="#">
              <span class="material-symbols-outlined">favorite</span>
              <span class="link-text">Lista de desejos</span>
            </a>
            <a href="#">
              <span class="material-symbols-outlined">help</span>
              <span class="link-text">Suporte</span>
            </a>
            <a href="#">
              <span class="material-symbols-outlined">info</span>
              <span class="link-text">Sobre nós</span>
            </a>
        </div>
      </nav>

    <main>
      <div id="titulo">
        <h1>Celulares com os melhores preços!</h1>
      </div>

      <div id="container-celulares">
        {% for produto in produtos %}
        <div class="item-loja">
            <!-- CORAÇÃO --> 
            <label class="heart-label">
            <input type="checkbox" class="heart-checkbox" />
            <span class="material-symbols-outlined heart-icon">favorite</span>
            </label>

            <!-- CARREGAMENTO DE IMAGEM -->
            <div class="img_cel">
              {% if produto.imagem.startswith('http') %}
                  <img src="{{ produto.imagem }}" alt="{{ produto.nome }}">
              {% else %}
                  <img src="{{ url_for('static', filename='img/' ~ produto.imagem) }}" alt="{{ produto.nome }}">
              {% endif %}
            </div>
            
            
            <div class="nome_produto">
            <h2>{{ produto.descricao }}</h2>
            </div>
            <div class="preco_info">
                <h3>Menor preço via <a href="{{ produto.urls_mapeadas[produto.menor_loja] }}" target="_blank">{{ produto.menor_loja }}</a></h3>
                <p class="menor_preco">R$ {{ "%.2f"|format(produto.menor_preco)|replace('.', ',') }}</p>
                <p>Outras lojas:</p>
                    {% for loja, preco in produto.precos.items() %}
                        {% if loja != produto.menor_loja %}
                            {% if preco is not string %}
                                <p class="nome_loja"><a href="{{ produto.urls_mapeadas[loja] }}" target="_blank" rel="noopener noreferrer">{{ loja }}:</a> R$ {{ "%.2f"|format(preco)|replace('.', ',') }}</p>
                            {% else %}
                                <p class="nome_loja">{{ loja }}: Preço não encontrado</p>
                            {% endif %}
                        {% endif %}
                    {% endfor %}
            </div>

            <div class="botao-carrinho">
            <button type="button" class="button-carrinho">
                <span class="button__text">Ativar alerta</span>
                <span class="button__icon">
                <span class="material-symbols-outlined">campaign</span>
                </span>
            </button>
            </div>
        </div>
        {% endfor %}
        </div>

    </main>
  
  <!-- FORMULARIO --> 
  <form class="form">
    <!-- Botão de fechar -->
      <span class="close-button" style="
        color: #aaa;
        float: right;
        font-size: 28px;
        font-weight: bold;
        cursor: pointer;
        position: absolute;
        top: 10px;
        right: 20px;
      ">&times;</span>

      <p class="form-title">Criar alerta personalizado</p>
      <div class="input-container">
        <input type="email" placeholder="Digite seu email">
        <span></span>
      </div>
      <div class="input-container">
        <input type="number" placeholder="Digite o preço desejado">
      </div>
      <button type="submit" class="submit">
        Ativar alerta
      </button>
    </form>
    <script src="../static/main.js"></script>
  </body>
</html>